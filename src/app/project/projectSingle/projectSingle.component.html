<!-- <div class="row">
  <div class="col-md-1"></div>
  <div class="col-md-2"><button type="button" class="btn btn-warning" (click)="goBack()"><i class="fa fa-chevron-left"><a> Retour</a></i></button></div>
  <div class="col-md-6">
    <h3 class="title">Ajouter / Ã‰diter un Projet</h3></div>
  <div class="col-md-3"></div>
</div> -->

<div class="container">

  <app-header [showBackButton]="true" [nameObject]="'project'" [showCreateButton]="false"></app-header>


  <div>
    <form [formGroup]="myForm" novalidate (ngSubmit)="save()" (keydown.enter)="$event.preventDefault()">
      <div>
        <div>
          <label>Id</label> {{fetchedProject._id}}
        </div>
      </div>

      <div>
        <div>
          <button (click)="changeCascade(i, -1, -1)" *ngFor="let itemStep of itemSteps;let i=index;" type="button" class="btn" [ngClass]="{'btn-success': i==selectedIndex0, '': i!=selectedIndex0}">
          {{itemStep.categ}}
        </button>
        </div>
        <br>
        <div *ngIf="selectedIndex0>=0">
          <button (click)="changeCascade(selectedIndex0, i, -1)" *ngFor="let itemStep of itemSteps[selectedIndex0].subCateg;let i=index;" type="button" class="btn" [ngClass]="{'btn-success': i==selectedIndex1, '': i!=selectedIndex1}">
          {{itemStep.categ}}
        </button>
        </div>
        <br>
        <div *ngIf="selectedIndex1>=0">
          <button (click)="changeCascade(selectedIndex0, selectedIndex1, i)" *ngFor="let itemStep of itemSteps[selectedIndex0].subCateg[selectedIndex1].subCateg;let i=index;" type="button" class="btn" [ngClass]="{'btn-success': i==selectedIndex2, '': i!=selectedIndex2}">
          {{itemStep.categ}}
        </button>
        </div>
      </div>


      <br>



      <div class="form-group">

        <div class="phyto-ctnr ttl-cde">
          <label>Nom</label>
          <input class="form-control col-md-4" type="text" formControlName="name" [(ngModel)]="fetchedProject.details.name" placeholder="Ref">
        </div>
      </div>
      <div class="form-group phyto-ctnr ttl-cde">
        <label>Description</label>
        <input class="form-control col-md-4" type="text" formControlName="description" placeholder="description" [(ngModel)]="fetchedProject.details.description">
      </div>



      <div class="form-group">
        <label>Creation Date</label>
        <div>
          <input type="date" class="form-control col-md-4" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedProject.dateProject.creationDateString">
        </div>
      </div>





      <div *ngIf="fetchedProject._id" class="FormGroup whtxt">
        <a class="btn btn-warning" [routerLink]="['/project/tasks/' + fetchedProject._id]">
         <i class="fa fa-calendar" aria-hidden="true"></i>
         <span>{{'Tasks' | translate}}</span>
        </a>
      </div>


      <div *ngIf="fetchedProject._id" class="FormGroup whtxt">
        <a class="btn btn-warning" (click)="seeCalendar()">
         <i class="fa fa-calendar" aria-hidden="true"></i>
         <span>{{'See calendar for this project' | translate}}</span>
        </a>
      </div>


      <app-autocomplete class="col-md-4" [typeAutocomplete]="'user'" [title]="'Customer'" [singleChoice]="'true'" [arrayContent]="fetchedProject.clients" (getResultAutocomplete)="selectUser($event[0])">
      </app-autocomplete>

      <br>
      <div *ngIf="fetchedProject._id">
        <div *ngFor="let user of fetchedProject.clients">
          <label>Devis</label>
          <app-quotes [showHeader]=false [userId]="user._id" [projectId]="fetchedProject._id"></app-quotes>

        </div>
      </div>



      <div class="form-group prmimg-cnt">

        <div *ngFor="let singleForm of fetchedProject.forms; let i=index;">
          <img class="promo-img" src="./uploads/forms/{{singleForm.owner}}/{{singleForm.imagePath}}" onerror="this.src ='assets/images/no-image-found.jpg'">
          <button type="button" md-button (click)="removePic(i)">
            <i class="fa fa-times"></i>
          </button>
        </div>
        <div class="btn btn-outline-primary col-md-2">
          <button type="button" md-button (click)="openDialog('img')" class="addpic-squr">
            Add Picture
            <br>
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </div>




      <div class="form-group">
        <select class="form-control col-md-3" formControlName="status" [(ngModel)]="fetchedProject.status">
        <option *ngFor="let n of status" [ngValue]="n.index">{{n.label}}</option>
      </select>
      </div>

      <div class="form-group">
        <app-autocomplete class="col-md-4" [typeAutocomplete]="'user'" [title]="'Assigned To'" [singleChoice]="'true'" [arrayContent]="fetchedProject.assignedTos" (getResultAutocomplete)="selectAssignedTo($event[0])">
        </app-autocomplete>

      </div>

      <div class="valid-edit">
        <button type="submit" class="done btn btn-success" [disabled]="!myForm.valid">Valider</button>
        <button *ngIf="fetchedProject._id" type="button" class="delete" md-button (click)="openDialogDelete()">
        Delete
      </button>
      </div>
      <div class="clearfix"></div>
    </form>
  </div>
</div>
