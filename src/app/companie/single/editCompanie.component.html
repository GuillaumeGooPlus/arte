<div class="container-fluid">
  <div class="hdform">
    <h3><i class="fa fa-user" aria-hidden="true"></i>{{'Supplier' | translate}}</h3>
  </div>
  <form [formGroup]="myForm" novalidate (ngSubmit)="save()">
    <div class="row">
      <div class="col">
        <h5>{{'Identity' | translate}}</h5>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="nameCompanie" [(ngModel)]="fetchedCompanie.nameCompanie" required minlength="5" placeholder="Nom de la Société">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="email" [(ngModel)]="fetchedCompanie.email" required minlength="5" placeholder="Email">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="phoneNumber" [(ngModel)]="fetchedCompanie.phoneNumber" required minlength="5" placeholder="Numéro de téléphone">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="faxNumber" [(ngModel)]="fetchedCompanie.faxNumber" required minlength="5" placeholder="Numéro de Fax">
        </div>

        <!-- <div class="form-group">
          <input type="text" class="form-control" formControlName="name" [(ngModel)]="fetchedCompanie.nameCompanie" required minlength="5" placeholder="Nom interlocuteur">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="name" [(ngModel)]="fetchedCompanie.nameCompanie" required minlength="5" placeholder="Prénom interlocuteur">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="name" [(ngModel)]="fetchedCompanie.nameCompanie" required minlength="5" placeholder="Téléphone interlocuteur">
        </div> -->

      </div>
      <div class="col">
        <h5>{{'Details' | translate}}</h5>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="address" [(ngModel)]="fetchedCompanie.address.address" required minlength="5" placeholder="Addresse">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="city" [(ngModel)]="fetchedCompanie.address.city" required minlength="2" placeholder="Ville">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="zip" [(ngModel)]="fetchedCompanie.address.zip" required minlength="5" placeholder="Code postal">
        </div>
        <!-- <div class="form-group">
          <input type="text" class="form-control" formControlName="state" [(ngModel)]="fetchedCompanie.address.state" required minlength="5" placeholder="State">
        </div> -->
        <div class="form-group">
          <input type="text" class="form-control" formControlName="country" [(ngModel)]="fetchedCompanie.address.country" required minlength="5" placeholder="Pays">
        </div>
      </div>


      <div class="col">
        <h5>{{'Divers' | translate}}</h5>
        <div class="form-group">
          <input type="text" class="form-control" formControlName="VAT" [(ngModel)]="fetchedCompanie.VAT" required minlength="5" placeholder="Numéro de TVA">
        </div>
        <app-picture [forms]="fetchedCompanie.forms" (getPicture)="getPicture($event)"></app-picture>
      </div>
    </div>





    <div *ngIf="isMyCompanie()" class="form-group sln-inffrm">
      <h4>Options Calendar</h4>
      <input type="text" class="form-control" formControlName="timeBegin" [(ngModel)]="fetchedCompanie.option.calendar.timeBegin" required minlength="1" placeholder="timeBegin">
      <input type="text" class="form-control" formControlName="timeEnd" [(ngModel)]="fetchedCompanie.option.calendar.timeEnd" required minlength="1" placeholder="timeEnd">
    </div>

    <div *ngIf="isMyCompanie()">
      <h4>type Users</h4>
      <div (click)="seeTypeUser=!seeTypeUser">See Categs Project</div>
      <div *ngIf="seeTypeUser">
        <button type="button" (click)="addTypeUser()">addTypeUser</button>
        <div *ngFor="let typeUser of fetchedCompanie.typeUsers; let i=index;">
          <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.typeUsers[i].value">
          <button type="button" (click)="removeTypeUser(i)">X</button>
        </div>
      </div>


      <h4>Categories</h4>
      <div (click)="seeCategProject=!seeCategProject">See Categs Project</div>
      <div *ngIf="seeCategProject">
        <button type="button" (click)="addCateg('categProject', 0, 0, 0, 0)">Add Categ Project</button>
        <div class="categ0" *ngFor="let categorie0 of fetchedCompanie.categories.categProject; let i = index;">
          <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.categories.categProject[i].categ">
          <input type="checkbox" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.categories.categProject[i].isFlagged">isFlagged
          <button type="button" (click)="removeCateg('categProject', 1,i,0,0)">X</button>
          <button type="button" (click)="addCateg('categProject', 1,i,0,0)">+</button>
          <div class="categ1" *ngFor="let categorie1 of categorie0.subCateg; let j = index;">
            <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.categories.categProject[i].subCateg[j].categ">
            <button type="button" (click)="removeCateg('categProject', 2,i,j,0)">X</button>
            <button type="button" (click)="addCateg('categProject', 2,i,j,0)">+</button>
            <div class="categ2" *ngFor="let categorie2 of categorie1.subCateg; let k = index;">
              <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.categories.categProject[i].subCateg[j].subCateg[k].categ">
              <button type="button" (click)="removeCateg('categProject', 3,i,j,k)">X</button>
            </div>
          </div>
        </div>
      </div>


      <div (click)="seeCategProduct=!seeCategProduct">See Categs Products</div>
      <div *ngIf="seeCategProduct">
        <button type="button" (click)="addCateg('categProduct', 0, 0, 0, 0)">Add Categ Project</button>
        <div class="categ0" *ngFor="let categorie0 of fetchedCompanie.categories.categProduct; let i = index;">
          <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.categories.categProduct[i].categ">
          <button type="button" (click)="removeCateg('categProduct', 1,i,0,0)">X</button>
          <button type="button" (click)="addCateg('categProduct', 1,i,0,0)">+</button>
          <div class="categ1" *ngFor="let categorie1 of categorie0.subCateg; let j = index;">
            <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.categories.categProduct[i].subCateg[j].categ">
            <button type="button" (click)="removeCateg('categProduct', 2,i,j,0)">X</button>
            <button type="button" (click)="addCateg('categProduct', 2,i,j,0)">+</button>
            <div class="categ2" *ngFor="let categorie2 of categorie1.subCateg; let k = index;">
              <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedCompanie.categories.categProduct[i].subCateg[j].subCateg[k].categ">
              <button type="button" (click)="removeCateg('categProduct', 3,i,j,k)">X</button>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="1==2">
        <div *ngIf="isMyCompanie()">
          <button type="button" [routerLink]="['/user/paiement']">{{'Plan' | translate}}</button> {{'Plan' | translate}}: {{fetchedCompanie.planDetail.plan}} ({{fetchedCompanie.planDetail.current_period_end | date:'yyyy-MM-dd'}})
        </div>
        <button type="button" (click)="initDataToRemove()">Init Data</button>
        <h4>{{'banck' | translate}}</h4>
        <h4>{{'Stripe' | translate}}</h4>
        <md-radio-group class="example-radio-group" formControlName="serviceSelected" [(ngModel)]="fetchedCompanie.banck.serviceSelected">
          <md-radio-button class="example-radio-button" *ngFor="let servicesBank of servicesBanks" [value]="servicesBank">
            {{servicesBank}}
          </md-radio-button>
        </md-radio-group>

        <input type="text" class="form-control" formControlName="secretKey" [(ngModel)]="fetchedCompanie.banck.stripe.secretKey" placeholder="secretKey">
      </div>
    </div>



    <div class="valid-edit">
      <button type="submit" class="sln-edt done">
          {{'Save' | translate}}
        </button>
      <!-- <button *ngIf="isMyCompanyRoute && fetchedCompanie._id==''" type="button" (click)="saveMyCompanie()" class="sln-edt done">
            Save my companie
        </button> -->

      <button *ngIf="fetchedCompanie._id && !isMyCompanie()" type="button" class="sln-edt done" (click)="onDelete(fetchedCompanie._id)">
          Delete
      </button>
    </div>
    <div class="clearfix"></div>
  </form>

</div>
